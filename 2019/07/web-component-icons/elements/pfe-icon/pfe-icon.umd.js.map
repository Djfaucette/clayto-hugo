{"version":3,"file":"pfe-icon.umd.js","sources":["pfe-icon.js"],"sourcesContent":["import PFElement from '../pfelement/pfelement.js';\n\nclass PfeIconSet {\n  /**\n   * Run the icon set's name resolver to turn an icon name into an icon path, id, etc.\n   */\n  resolveIconName(iconName) {\n    return this._resolveIconName(iconName, this.name, this.path);\n  }\n\n  /**\n   * Create a new icon set.  Icon sets have a name (ie, a namespace).  For\n   * example, an icon with a name of \"rh-logo\" represents a \"logo\" icon from the\n   * \"rh\" set.  Icon set names are always separated from the rest of the icon\n   * name with a hyphen `-`.  This means that set names cannot contain a hyphen.\n   *\n   * @param {String} name the namespace of the icon set\n   * @param {String} path the web-accessible path to the icon set (for instance, a CDN)\n   * @param {Function} resolveIconName an optional function to combine the path and an icon name into a final path.  The function will be passed the namespaced icon name (for example, \"rh-api\" where rh is the namespace and api is the individual icon's name)\n   * @returns {Object} an object with the status of the icon set installation, such as `{ result: true, text: 'icon set installed' }` or `{ result: false, text: 'icon set is already installed' }`\n   */\n  constructor(name, path, resolveIconName) {\n    this.name = name;\n    this.path = path;\n    this._resolveIconName = resolveIconName;\n  }\n}\n\n/**\n * An icon name resolver for the PFE built-in icon sets.\n */\nfunction resolveIconName(name, iconSetName, iconSetPath) {\n  const [, , iconName] = /^([^-]+)-(.*)/.exec(name);\n\n  const iconId = `${iconSetName}-icon-${iconName}`;\n  const iconPath = `${iconSetPath}/${iconId}.svg`;\n\n  return {\n    iconSetName,\n    iconName,\n    iconId,\n    iconPath\n  };\n}\n\n/**\n * An 'init' function to add the PFE built-in icon sets to the current page.\n */\nfunction addBuiltIns(PfeIcon) {\n  [\n    {\n      name: \"web\",\n      path: \"https://access.redhat.com/webassets/avalon/j/lib/rh-iconfont-svgs\"\n    },\n    {\n      name: \"rh\",\n      path: \"https://access.redhat.com/webassets/avalon/j/lib/rh-iconfont-svgs\"\n    }\n  ].forEach(set => PfeIcon.addIconSet(set.name, set.path, resolveIconName));\n}\n\n/*!\n * PatternFly Elements: PfeIcon 1.0.0-prerelease.19\n * @license\n * Copyright 2019 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nclass PfeIcon extends PFElement {\n  static get version() {\n    return \"1.0.0-prerelease.19\";\n  }\n\n  get html() {\n    return `<style>:host{--pfe-icon--spacing:var(--pfe-theme--container-spacer, 1rem);--pfe-icon--size:var(--pfe-theme--icon-size, 1em);--pfe-icon--color--bg:transparent;--pfe-icon--color--border:transparent;display:inline-block;vertical-align:middle;border-radius:50%;background-color:var(--pfe-icon--color--bg);border:var(--pfe-icon--color--border);position:relative}:host,:host svg{width:1em;height:1em}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){:host{background-color:#fff!important}:host svg filter feFlood{flood-color:#000!important}}@supports (-ms-accelerator:true){:host{background-color:#fff!important}:host svg filter feFlood{flood-color:#000!important}}@supports (-ms-ime-align:auto){:host{background-color:#fff!important}:host svg filter feFlood{flood-color:#000!important}}:host([data-block]){display:block;margin-bottom:var(--pfe-icon--spacing);margin-top:var(--pfe-icon--spacing)}:host([data-block]):first-child{margin-top:0}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){:host svg image{-webkit-filter:none;filter:none}}:host svg image.load-failed{display:none}:host svg filter feFlood{flood-color:var(--pfe-broadcasted--color--text)}:host([size=\"2x\"]),:host([size=\"2x\"]) svg{width:2em;height:2em}:host([size=\"3x\"]),:host([size=\"3x\"]) svg{width:3em;height:3em}:host([size=\"4x\"]),:host([size=\"4x\"]) svg{width:4em;height:4em}:host([size=xl]),:host([size=xl]) svg{width:100px;height:100px}:host([size=lg]),:host([size=lg]) svg{width:64px;height:64px}:host([size=md]),:host([size=md]) svg{width:32px;height:32px}:host([size=sm]),:host([size=sm]) svg{width:14px;height:14px}:host([color=base]){--pfe-broadcasted--color--text:var(--pfe-theme--color--ui-base, #0477a4)}:host([color=complement]){--pfe-broadcasted--color--text:var(--pfe-theme--color--ui-complement, #464646)}:host([color=accent]){--pfe-broadcasted--color--text:var(--pfe-theme--color--ui-accent, #fe460d)}:host([color=critical]){--pfe-broadcasted--color--text:var(--pfe-theme--color--feedback--critical, #bb0000)}:host([color=important]){--pfe-broadcasted--color--text:var(--pfe-theme--color--feedback--important, #d73401)}:host([color=moderate]){--pfe-broadcasted--color--text:var(--pfe-theme--color--feedback--moderate, #ffc024)}:host([color=success]){--pfe-broadcasted--color--text:var(--pfe-theme--color--feedback--success, #2e7d32)}:host([color=info]){--pfe-broadcasted--color--text:var(--pfe-theme--color--feedback--info, #0277bd)}:host([color=default]){--pfe-broadcasted--color--text:var(--pfe-theme--color--feedback--default, #606060)}:host([circled]){--pfe-icon--color--bg:transparent;--pfe-icon--color--border:var(--pfe-theme--color--surface--border, #dfdfdf);padding:.05em}:host([circled=base]){--pfe-icon--color--bg:var(--pfe-theme--color--surface--base, #dfdfdf);--pfe-icon--color--border:transparent;--pfe-broadcasted--color--text:var(--pfe-theme--color--surface--base--text, #333)}:host([circled=lightest]){--pfe-icon--color--bg:var(--pfe-theme--color--surface--lightest, #fff);--pfe-icon--color--border:transparent;--pfe-broadcasted--color--text:var(--pfe-theme--color--surface--lightest--text, #333)}:host([circled=light]){--pfe-icon--color--bg:var(--pfe-theme--color--surface--lighter, #ececec);--pfe-icon--color--border:transparent;--pfe-broadcasted--color--text:var(--pfe-theme--color--surface--lighter--text, #333)}:host([circled=dark]){--pfe-icon--color--bg:var(--pfe-theme--color--surface--darker, #464646);--pfe-icon--color--border:transparent;--pfe-broadcasted--color--text:var(--pfe-theme--color--surface--darker--text, #fff)}:host([circled=darkest]){--pfe-icon--color--bg:var(--pfe-theme--color--surface--darkest, #131313);--pfe-icon--color--border:transparent;--pfe-broadcasted--color--text:var(--pfe-theme--color--surface--darkest--text, #fff)}:host([circled=complement]){--pfe-icon--color--bg:var(--pfe-theme--color--surface--complement, #0477a4);--pfe-icon--color--border:transparent;--pfe-broadcasted--color--text:var(--pfe-theme--color--surface--complement--text, #fff)}:host([circled=accent]){--pfe-icon--color--bg:var(--pfe-theme--color--surface--accent, #fe460d);--pfe-icon--color--border:transparent;--pfe-broadcasted--color--text:var(--pfe-theme--color--surface--accent--text, #fff)}</style><svg xmlns=\"http://www.w3.org/2000/svg\">\n  <filter color-interpolation-filters=\"sRGB\" x=\"0\" y=\"0\" height=\"100%\" width=\"100%\">\n    <feFlood result=\"COLOR\" />\n    <feComposite operator=\"in\" in=\"COLOR\" in2=\"SourceAlpha\" />\n  </filter>\n  <image xlink:href=\"\" width=\"100%\" height=\"100%\"></image>\n</svg>`;\n  }\n\n  static get properties() {\n    return {\"icon\":{\"title\":\"Icon\",\"type\":\"string\",\"enum\":[],\"prefixed\":false},\"size\":{\"title\":\"Size\",\"type\":\"string\",\"enum\":[\"default\",\"xl\",\"lg\",\"md\",\"sm\",\"2x\",\"3x\",\"4x\"],\"default\":\"default\",\"prefixed\":false},\"color\":{\"title\":\"Color\",\"type\":\"string\",\"enum\":[\"default\",\"base\",\"compliment\",\"accent\",\"critical\",\"important\",\"moderate\",\"success\",\"info\"],\"default\":\"default\",\"prefixed\":false}};\n  }\n\n  static get slots() {\n    return {};\n  }\n  static get tag() {\n    return \"pfe-icon\";\n  }\n\n  get templateUrl() {\n    return \"pfe-icon.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-icon.scss\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-icon.json\";\n  }\n\n  static get observedAttributes() {\n    return [\"icon\"];\n  }\n\n  constructor() {\n    super(PfeIcon);\n\n    this.image = this.shadowRoot.querySelector(\"svg image\");\n    this.image.addEventListener(\"load\", () => this.iconLoad());\n    this.image.addEventListener(\"error\", () => this.iconLoadError());\n  }\n\n  iconLoad() {\n    this.image.classList.remove(\"load-failed\");\n  }\n\n  iconLoadError() {\n    this.image.classList.add(\"load-failed\");\n  }\n\n  attributeChangedCallback(attr, oldValue, newValue) {\n    super.attributeChangedCallback(...arguments);\n    this.updateIcon(newValue);\n  }\n\n  updateIcon(iconName = this.getAttribute(\"icon\")) {\n    const { setName, set } = PfeIcon.getIconSet(iconName);\n\n    if (set) {\n      const { iconPath } = set.resolveIconName(iconName);\n      this.image.setAttribute(\"xlink:href\", iconPath);\n      const randomId =\n        \"filter-\" +\n        Math.random()\n          .toString()\n          .slice(2, 10);\n\n      this.setFilterId(randomId);\n    } else {\n      // the icon set we want doesn't exist (yet?) so start listening for new icon sets\n      this._handleAddIconSet = this._createIconSetHandler(setName);\n\n      document.body.addEventListener(\n        PfeIcon.EVENTS.ADD_ICON_SET,\n        this._handleAddIconSet\n      );\n    }\n  }\n\n  /**\n   * Sets the id attribute on the <filter> element and points the CSS `filter` at that id.\n   */\n  setFilterId(id) {\n    // set the CSS filter property to point at the given id\n    this.shadowRoot.querySelector(\"svg image\").style.filter = `url(#${id})`;\n\n    // set the id attribute on the SVG filter element to match\n    this.shadowRoot.querySelector(\"svg filter\").setAttribute(\"id\", id);\n  }\n\n  _createIconSetHandler(setName) {\n    return ev => {\n      // if the set we're waiting for was added, run updateIcon again\n      if (setName === ev.detail.set.name) {\n        document.body.removeEventListener(\n          PfeIcon.EVENTS.ADD_ICON_SET,\n          this._handleAddIconSet\n        );\n        this.updateIcon();\n      }\n    };\n  }\n\n  /**\n   * Get an icon set by providing the set's name, _or_ the name of an icon from that set.\n   *\n   * @param {String} iconName the name of the set, or the name of an icon from that set.\n   * @return {PfeIconSet} the icon set\n   */\n  static getIconSet(iconName) {\n    const [setName] = iconName.split(\"-\");\n    const set = this._iconSets[setName];\n    return { setName, set };\n  }\n\n  static addIconSet(name, path, resolveIconName) {\n    if (this._iconSets[name]) {\n      throw new Error(\n        `can't add icon set ${name}; a set with that name already exists.`\n      );\n    }\n\n    this._iconSets[name] = new PfeIconSet(name, path, resolveIconName);\n\n    document.body.dispatchEvent(\n      new CustomEvent(this.EVENTS.ADD_ICON_SET, {\n        bubbles: false,\n        detail: {\n          set: this._iconSets[name]\n        }\n      })\n    );\n  }\n\n  static get EVENTS() {\n    return {\n      ADD_ICON_SET: `${this.tag}:add-icon-set`\n    };\n  }\n}\n\nPfeIcon._iconSets = {};\n\naddBuiltIns(PfeIcon);\n\nPFElement.create(PfeIcon);\n\nexport default PfeIcon;\n//# sourceMappingURL=pfe-icon.js.map\n"],"names":["PfeIconSet","iconName","_resolveIconName","name","path","resolveIconName","iconSetName","iconSetPath","exec","iconId","iconPath","addBuiltIns","PfeIcon","forEach","addIconSet","set","image","shadowRoot","querySelector","addEventListener","iconLoad","iconLoadError","classList","remove","add","attr","oldValue","newValue","arguments","updateIcon","getAttribute","getIconSet","setName","setAttribute","randomId","Math","random","toString","slice","setFilterId","_handleAddIconSet","_createIconSetHandler","document","body","EVENTS","ADD_ICON_SET","id","style","filter","ev","detail","removeEventListener","split","_iconSets","Error","dispatchEvent","CustomEvent","bubbles","tag","PFElement","create"],"mappings":"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"}